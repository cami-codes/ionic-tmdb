import{a as q}from"./chunk-M564DD7V.js";import{A as R,B as U,C as $,D as j,F as N,G as Y,e as k,h as O,m as H,o as F,p as A,w as B,x as w,y as z,z as D}from"./chunk-ZMEXRA4P.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-L222AEIJ.js";import{B as v,Ca as P,Ha as f,Lc as L,R as I,Ra as d,Ta as _,Ua as M,Va as u,Wa as x,Xa as i,Ya as n,Za as s,bb as b,cb as c,ib as m,jb as g,mb as y,nb as S,ob as T,pb as E,ra as C,ta as l,w as h}from"./chunk-7XT2OLE6.js";import"./chunk-RATFQPWX.js";import"./chunk-NED6OHOS.js";import"./chunk-CY4SSNAL.js";import"./chunk-F7XBNY6P.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-LF5XB4YN.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-RW4GY4BD.js";var J=(e,t)=>t.id,K=()=>["Ok"],Q=e=>["/details",e];function V(e,t){e&1&&(i(0,"ion-item",5)(1,"ion-avatar",6),s(2,"ion-skeleton-text"),n(),s(3,"ion-skeleton-text",7),n())}function W(e,t){if(e&1&&(i(0,"ion-list"),u(1,V,4,0,"ion-item",5,M),n()),e&2){let o=c();l(),x(o.dummyArray)}}function X(e,t){if(e&1&&s(0,"ion-alert",1),e&2){let o=c();d("message",o.error)("buttons",y(2,K))}}function Z(e,t){if(e&1&&(i(0,"ion-item",2)(1,"ion-avatar",6),s(2,"img",8),n(),i(3,"ion-label",9)(4,"h3"),m(5),n(),i(6,"p"),m(7),T(8,"date"),n()(),i(9,"ion-badge",10),m(10),n()()),e&2){let o=t.$implicit,r=c();d("routerLink",S(8,Q,o.id)),l(2),d("src",r.imageBaseUrl+"/w92"+o.poster_path,C),l(3),g(o.title),l(2),g(E(8,5,o.release_date,"y")),l(3),g(o.vote_average)}}function ee(e,t){e&1&&(i(0,"ion-item",11)(1,"ion-label",9),m(2,"No movies found"),n()())}function te(e,t){if(e&1&&f(0,ee,3,0,"ion-item",11),e&2){let o=c();_(o.isLoading?-1:0)}}var de=(()=>{let t=class t{constructor(){this.movieService=I(q),this.currentPage=1,this.error=null,this.isLoading=!1,this.movies=[],this.imageBaseUrl="https://image.tmdb.org/t/p",this.dummyArray=new Array(5),this.loadMovies()}loadMovies(r){this.error=null,r||(this.isLoading=!0),this.movieService.getTopRatedMovies(this.currentPage).pipe(v(()=>{this.isLoading=!1,r&&r.target.complete()}),h(a=>(this.error=a.error.status_message,[]))).subscribe({next:a=>{this.movies.push(...a.results),r&&(r.target.disabled=a.total_pages===this.currentPage)}})}loadMore(r){this.currentPage++,this.loadMovies(r)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=P({type:t,selectors:[["app-home"]],decls:13,vars:2,consts:[["color","primary"],["header","Error","isOpen","true",3,"message","buttons"],["button","",3,"routerLink"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["lines","none",1,"ion-padding-bottom"],["slot","start"],["animated","",2,"height","40px"],["alt","Movie Poster",3,"src"],[1,"ion-text-wrap"],["slot","end"],["lines","none"]],template:function(a,p){a&1&&(i(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),m(3," Trending Movies "),n()()(),i(4,"ion-content"),f(5,W,3,0,"ion-list")(6,X,1,3,"ion-alert",1),i(7,"ion-list"),u(8,Z,11,10,"ion-item",2,J,!1,te,1,1),n(),i(11,"ion-infinite-scroll",3),b("ionInfinite",function(G){return p.loadMore(G)}),s(12,"ion-infinite-scroll-content",4),n()()),a&2&&(l(5),_(p.isLoading?5:p.error?6:-1),l(3),x(p.movies))},dependencies:[A,U,H,j,F,R,$,w,Y,N,B,z,D,L,O,k],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]});let e=t;return e})();export{de as HomePage};
