import{a as X}from"./chunk-M564DD7V.js";import{A as h,B as G,C as v,D as J,F as K,G as Q,e as V,h as z,m as O,o as x,p as $,w as j,x as N,y as W,z as q}from"./chunk-ZMEXRA4P.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-L222AEIJ.js";import{B as I,Ca as y,Ha as f,Ia as P,Oa as C,Pa as L,R as T,Ra as d,Ta as H,Ua as M,Va as _,Wa as u,X as S,Xa as r,Y as b,Ya as n,Za as c,ab as k,bb as F,cb as s,ib as m,jb as g,kb as w,mb as A,nb as B,ob as R,pb as U,ra as E,ta as l,w as D}from"./chunk-7XT2OLE6.js";import"./chunk-RATFQPWX.js";import"./chunk-NED6OHOS.js";import"./chunk-CY4SSNAL.js";import"./chunk-F7XBNY6P.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-LF5XB4YN.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-RW4GY4BD.js";var Y=(e,t)=>t.id,Z=()=>[$,G,x,h,v,W,q,import("./chunk-OGLZ3HRL.js").then(e=>e.DatePipe),V],ee=e=>["/details",e],te=()=>["Ok"];function ie(e,t){if(e&1&&(r(0,"ion-item",2)(1,"ion-avatar",5),c(2,"img",6),n(),r(3,"ion-label",7)(4,"h3"),m(5),n(),r(6,"p"),m(7),R(8,"date"),n()(),r(9,"ion-badge",8),m(10),n()()),e&2){let i=t.$implicit,o=s(2);d("routerLink",B(8,ee,i.id)),l(2),d("src",o.imageBaseUrl+"/w92"+i.poster_path,E),l(3),g(i.title),l(2),g(U(8,5,i.release_date,"y")),l(3),w(" ",i.vote_average," ")}}function ne(e,t){e&1&&(r(0,"ion-item",9)(1,"ion-label",10),m(2,"No movies found"),n()())}function oe(e,t){if(e&1&&f(0,ne,3,0,"ion-item",9),e&2){let i=s(2);H(i.isLoading?-1:0)}}function re(e,t){if(e&1){let i=k();r(0,"ion-list"),_(1,ie,11,10,"ion-item",2,Y,!1,oe,1,1),n(),r(4,"ion-infinite-scroll",3),F("ionInfinite",function(a){S(i);let p=s();return b(p.loadMore(a))}),c(5,"ion-infinite-scroll-content",4),n()}if(e&2){let i=s();l(),u(i.movies)}}function ae(e,t){e&1&&m(0," Transition to list.... ")}function le(e,t){e&1&&(r(0,"ion-item",12)(1,"ion-avatar",5),c(2,"ion-skeleton-text"),n(),c(3,"ion-skeleton-text",13),n())}function se(e,t){if(e&1&&(r(0,"ion-list",11),_(1,le,4,0,"ion-item",12,M),n()),e&2){let i=s();l(),u(i.dummyArray)}}function me(e,t){if(e&1&&c(0,"ion-alert",14),e&2){let i=s();d("message",i.error)("buttons",A(2,te))}}var he=(()=>{let t=class t{constructor(){this.movieService=T(X),this.currentPage=1,this.error=null,this.isLoading=!1,this.movies=[],this.imageBaseUrl="https://image.tmdb.org/t/p",this.dummyArray=new Array(5),this.loadMovies()}loadMovies(o){this.error=null,o||(this.isLoading=!0),this.movieService.getTopRatedMovies(this.currentPage).pipe(I(()=>{this.isLoading=!1,o&&o.target.complete()}),D(a=>(this.error=a.error.status_message,[]))).subscribe({next:a=>{this.movies.push(...a.results),o&&(o.target.disabled=a.total_pages===this.currentPage)}})}loadMore(o){this.currentPage++,this.loadMovies(o)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=y({type:t,selectors:[["app-home-defer"]],decls:11,vars:1,consts:[[2e3,null],["color","primary"],["button","",3,"routerLink"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["slot","start"],["alt","poster",3,"src"],[1,"ion-text-wrap"],["slot","end"],["lines","none"],[1,"ion-text-center"],[1,"ion-padding-top"],["lines","none",1,"ion-padding-bottom"],["animated","",2,"height","40px"],["header","Error","isOpen","true",3,"message","buttons"]],template:function(a,p){a&1&&(r(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),m(3,"Trending Movies"),n()()(),r(4,"ion-content"),f(5,re,6,1)(6,ae,1,0)(7,se,3,0)(8,me,1,3),C(9,5,Z,6,7,8,0,null,P),n()),a&2&&(l(9),L(!p.isLoading))},dependencies:[O,J,x,h,v,N,Q,K,j,z],encapsulation:2});let e=t;return e})();export{he as HomeDeferPage};
